(this["webpackJsonplatte-machine"]=this["webpackJsonplatte-machine"]||[]).push([[0],{1:function(e,t,a){e.exports={modalContainer:"LatteModal_modalContainer__1EXIY",modalContent:"LatteModal_modalContent__1EAX0",animateModal:"LatteModal_animateModal__2En0j",title:"LatteModal_title__IZiSw",latteName:"LatteModal_latteName__3Kp1L",lableBox:"LatteModal_lableBox__3SnLs",labels:"LatteModal_labels__3q6vj",inputs:"LatteModal_inputs__r6Y58",btns:"LatteModal_btns__30BNw",red:"LatteModal_red__2f8hY",cancel:"LatteModal_cancel__waDvz",icon:"LatteModal_icon__2Y7Bi",inputName:"LatteModal_inputName__bzLNC"}},12:function(e,t,a){e.exports={home:"Header_home__2Hz-B",left:"Header_left__JRIOx",right:"Header_right__CK_dd",dash:"Header_dash__3E5mK",header:"Header_header__1MOL-"}},13:function(e,t,a){e.exports={footer:"Footer_footer__BKhgK",iconA:"Footer_iconA__1HXbG",iconB:"Footer_iconB__3nupA",icon:"Footer_icon__1-k_F"}},16:function(e,t,a){e.exports={container:"Home_container__Pn020",text:"Home_text__22ldf",line:"Home_line__yE-Vp",change:"Home_change__yaolK",arrow:"Home_arrow__3CW3N","arrow-jump":"Home_arrow-jump__1Krmi"}},17:function(e,t,a){e.exports={container:"CreateLatte_container__1P4W2",createDrink:"CreateLatte_createDrink__3n1Yj",text:"CreateLatte_text__2zabn",icon:"CreateLatte_icon__garnm"}},18:function(e,t,a){e.exports={container:"Messages_container__1ASQ4",shake:"Messages_shake__3i4H5",textBox:"Messages_textBox__1RWtO",text:"Messages_text__aa8Mg",close:"Messages_close__33iJq"}},28:function(e,t,a){e.exports={latteBox:"Latte_latteBox__3z4Bo",latteName:"Latte_latteName__2CJsX"}},42:function(e,t,a){e.exports={main:"Main_main__LmKsS"}},44:function(e,t,a){e.exports={ingredients:"LatteIngredients_ingredients__1Olid"}},45:function(e,t,a){e.exports={lattesContainer:"Lattes_lattesContainer__21ZHg"}},46:function(e,t,a){e.exports={body:"App_body__ZTvxg"}},47:function(e,t,a){e.exports=a(77)},52:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(39),i=a.n(s),o=(a(52),a(4)),c=a.n(o),l=a(40),u=a(8),d=a(11),m=a(3),p=a(20),f=a(21),_=a(22),h=a(23),v=a(10),E=a(2);var b=function(e){var t=e.ingredientName,a=e.parts,n=e.color,r={title:e.latteName.value,ingredients:[{name:null,parts:null,color:null}]};return"function"===typeof t[Symbol.iterator]?r.ingredients=function(e,t,a){for(var n=[],r=0;r<e.length;r++)n.push({name:e[r].value,parts:t[r].value,color:a[r].value});return n}(t,a,n):(r.ingredients[0].name=t.value,r.ingredients[0].parts=parseInt(a.value),r.ingredients[0].color=n.value),r},g=function(){var e=window.location.href.split("access_token=")[1];if(e){var t=e.indexOf("&");return e=e.slice(0,t)}},N=function(e){var t=function(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(a)}(e);return!(parseInt(Date.now()/1e3)>t.exp)&&(!!t.permissions.includes("delete:drinks")&&(!!t.permissions.includes("patch:drinks")&&!!t.permissions.includes("post:drinks")))},M=a(41),x=a.n(M),L=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))?{apiURL:"http://localhost:3333/api",auth0:{url:"coffe-shop-project",audience:"drinks",clientId:"SuLculVALk6l2oZ7aFFQUuZZ8N6lZUrH",callbackURL:"http://localhost:3000/latte-machine/lattes"}}:{apiURL:"https://shielded-wildwood-23349.herokuapp.com/api",auth0:{url:"coffe-shop-project",audience:"drinks",clientId:"SuLculVALk6l2oZ7aFFQUuZZ8N6lZUrH",callbackURL:"http://henryis.me/latte-machine"}},k=L.apiURL,O=function(){var e=Object(u.a)(c.a.mark((function e(t,a,n){var r,s,i=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>3&&void 0!==i[3]?i[3]:null,e.next=3,x()({method:t,baseURL:k,url:n,data:r||null,responseType:"json",headers:{Authorization:"Bearer ".concat(a)}});case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O("post",a,"/drinks",t));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O("get",t,"/drinks"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(c.a.mark((function e(t,a,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O("patch",n,"/drinks/".concat(t),a));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O("delete",a,"/drinks/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),B=a(42),S=a.n(B);var I=function(e){return r.a.createElement("div",{className:S.a.main},e.children)},A=a(16),D=a.n(A);var U=function(e){return r.a.createElement("div",{className:D.a.container},r.a.createElement("div",{className:D.a.text},"Welcome"),r.a.createElement("div",{className:D.a.line}),r.a.createElement("span",{className:[D.a.arrow,"material-icons"].join(" ")},"expand_more"))},H=a(12),T=a.n(H);var z=function(e){return r.a.createElement("div",{className:T.a.header},r.a.createElement(v.b,{className:T.a.home,to:"/latte-machine"},r.a.createElement("span",{className:T.a.left},"Latte"),r.a.createElement("span",{className:T.a.dash},"-"),r.a.createElement("span",{className:T.a.right},"Machine")))},F=a(13),Z=a.n(F);var R=function(e){return r.a.createElement("div",{className:Z.a.footer},r.a.createElement(v.b,{className:Z.a.iconA,to:"/latte-machine/lattes"},r.a.createElement("i",{className:[Z.a.icon,"material-icons"].join(" ")},"local_cafe"),r.a.createElement("div",null,"Lattes")),r.a.createElement(v.b,{className:Z.a.iconB,to:"/latte-machine/user"},r.a.createElement("i",{className:[Z.a.icon,"material-icons"].join(" ")},"account_box"),r.a.createElement("div",null,"User")))},K=a(17),V=a.n(K);var W=function(e){return r.a.createElement("div",{className:V.a.container},r.a.createElement("div",{className:V.a.createDrink,onClick:e.openModal()},r.a.createElement("div",{className:V.a.text},"Create Latte"),r.a.createElement("i",{className:[V.a.icon,"material-icons"].join(" ")},"cancel")))},G=a(44),J=a.n(G);var Y=function(e){var t=e.ingredients,a=t.reduce((function(e,t){var a=t.parts;return e+parseInt(a)}),0),n=t.map((function(e,t){var n=e.color,s=e.parts,i={backgroundColor:n,height:"".concat(100*s/a,"%")};return r.a.createElement("div",{key:t,style:i})}));return r.a.createElement("div",{className:J.a.ingredients},n)},X=a(28),P=a.n(X);var Q=function(e){var t=e.ingredients,a=e.title,n=e.edit;return r.a.createElement("div",{className:P.a.latteBox,onClick:n},r.a.createElement("div",{className:P.a.latteName},a),r.a.createElement(Y,{ingredients:t}))},q=a(45),$=a.n(q);var ee=function(e){var t=e.latteList,a=e.edit,n=t.map((function(e){return r.a.createElement(Q,{key:e.id,title:e.title,ingredients:e.ingredients,edit:function(){return a(e.id)}})}));return r.a.createElement("div",{className:$.a.lattesContainer},n)},te=a(9),ae=a.n(te),ne=L.auth0;var re=function(e){var t=e.token,a=e.hangleLogout,n="https://".concat(ne.url,".auth0.com/authorize?audience=").concat(ne.audience)+"&response_type=token&client_id=".concat(ne.clientId,"&redirect_uri=").concat(ne.callbackURL);return r.a.createElement("div",{className:ae.a.container},t?r.a.createElement("div",{className:ae.a.userBox},r.a.createElement("button",{onClick:a(),className:ae.a.login},"LOG OUT"),r.a.createElement("div",{className:ae.a.textBox},r.a.createElement("span",{className:ae.a.text},t))):r.a.createElement("div",{className:ae.a.userBox},r.a.createElement("a",{href:n,className:ae.a.login},"LOG IN")))},se=a(1),ie=a.n(se);var oe=function(e){var t=e.ingredient,a=e.add,n=e.remove,s=e.id;return r.a.createElement("div",{className:ie.a.lableBox},r.a.createElement("label",{className:ie.a.labels},"Ingredient Name"),r.a.createElement("input",{className:ie.a.inputs,type:"text",name:"ingredientName",defaultValue:t.name}),r.a.createElement("label",{className:ie.a.labels},"Parts"),r.a.createElement("select",{name:"parts",defaultValue:t.parts},r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3")),r.a.createElement("label",{className:ie.a.labels},"Color"),r.a.createElement("input",{className:ie.a.inputs,type:"color",name:"color",defaultValue:t.color}),r.a.createElement("span",{className:ie.a.btns,onClick:function(){return n(s)}},r.a.createElement("i",{className:[ie.a.icon,ie.a.red,"material-icons"].join(" ")},"close")),r.a.createElement("span",{className:ie.a.btns,onClick:function(){return a()}},r.a.createElement("i",{className:[ie.a.icon,"material-icons"].join(" ")},"add")))},ce=function(e){Object(h.a)(a,e);var t=Object(_.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).idGenerator=function(){return Math.floor(9999*Math.random())},n.add=function(){if(n.state.counter<n.maxIngredients){var e=Object(d.a)(n.state.list),t=n.idGenerator();e.push(r.a.createElement(oe,{key:t,ingredient:{},add:n.add,remove:n.remove,id:t})),n.setState({list:e,counter:n.state.counter+1})}},n.remove=function(e){if(n.state.counter>0){var t=n.state.list.findIndex((function(t){return parseInt(t.key)===parseInt(e)}));if(t>=0){var a=Object(d.a)(n.state.list);a.splice(t,1),n.setState({list:a,counter:n.state.counter-1})}}};var s=[],i=0,o=e.latte;if(o)i=(s=o.ingredients.map((function(e,t){return r.a.createElement(oe,{key:t,ingredient:e,add:n.add,remove:n.remove,id:t})}))).length-1;else{var c=n.idGenerator();s.push(r.a.createElement(oe,{key:c,ingredient:{},add:n.add,remove:n.remove,id:c}))}return n.maxIngredients=3,n.state={list:s,counter:i},n}return Object(f.a)(a,[{key:"render",value:function(){return this.state.list}}]),a}(n.Component);var le=function(e){var t=e,a=t.editMode,n=a?t.latte.title:"",s=a?t.latte.id:null,i=a?"Edit ".concat(n):"Create Latte";return r.a.createElement("div",{style:{display:e.display?"block":"none"},className:ie.a.modalContainer},r.a.createElement("div",{className:ie.a.modalContent},r.a.createElement("h2",{className:ie.a.title},i),r.a.createElement("div",{className:ie.a.preview}),r.a.createElement("form",{className:ie.a.form,onSubmit:function(t){return e.handleForm(t)}},r.a.createElement("div",{className:ie.a.latteName},r.a.createElement("label",{className:ie.a.labels},"Latte Name"),r.a.createElement("input",{className:[ie.a.inputs,ie.a.inputName].join(" "),type:"text",id:"latteName",name:"latteName",defaultValue:n})),a?r.a.createElement(ce,{latte:t.latte}):r.a.createElement(ce,null),r.a.createElement("button",{className:ie.a.btns,type:"submit"},"SAVE"),r.a.createElement("button",{className:[ie.a.btns,ie.a.red].join(" "),onClick:function(){return e.removeLatte(s)},type:"button"},"DELETE"),r.a.createElement("button",{className:[ie.a.btns,ie.a.cancel].join(" "),onClick:function(){return e.closeModal()},type:"button"},"CANCEL"))))},ue=a(18),de=a.n(ue);a(76);function me(e){var t=e.message,a=e.level,n=e.close;return r.a.createElement("div",{className:de.a.container},r.a.createElement("div",{className:[de.a.textBox,a].join(" ")},r.a.createElement("div",{className:de.a.close,onClick:n()},r.a.createElement("i",{className:"material-icons"},"close")),r.a.createElement("div",{className:de.a.text},t)))}var pe="error",fe=a(46),_e=a.n(fe),he=function(e){Object(h.a)(a,e);var t=Object(_.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).openModal=function(){n.setState(Object(m.a)({},n.state,{isModalOpen:!0}))},n.closeModal=function(){n.setState(Object(m.a)({},n.state,{isModalOpen:!1,isEditMode:!1}))},n.closeAlert=function(){n.setState(Object(m.a)({},n.state,{userMessage:{render:!1}}))},n.editLatte=function(e){if(n.state.isAuthorized){var t=n.state.latteDataList.filter((function(t){return parseInt(t.id)===parseInt(e)}));n.setState(Object(m.a)({},n.state,{isEditMode:!0,isModalOpen:!0,latteToEdit:t[0]}))}},n.removeLatte=function(e){var t=Object(d.a)(n.state.latteDataList);n.state.isAuthorized?C(e,n.state.authToken).then((function(a){var r=t.findIndex((function(t){return parseInt(t.id)===parseInt(e)}));t.splice(r,1),n.setState(Object(m.a)({},n.state,{isEditMode:!1,isModalOpen:!1,latteDataList:t}))})).catch((function(e){n.setState(Object(m.a)({},n.state,{isEditMode:!1,isModalOpen:!1,userMessage:{render:!0,message:e.message,level:pe}}))})):n.setState(Object(m.a)({},n.state,{isEditMode:!1,isModalOpen:!1,userMessage:{render:!1}}))},n.hangleLogout=function(){n.state.authToken&&n.setState(Object(m.a)({},n.state,{authToken:null,isAuthorized:!1}))},n.handleForm=function(e){if(!n.state.isAuthorized)return e.preventDefault(),void n.setState(Object(m.a)({},n.state,{isModalOpen:!1,isEditMode:!1}));var t=b(e.target),a=Object(d.a)(n.state.latteDataList);if(n.state.isEditMode){var r=n.state.latteToEdit.id;w(r,t,n.state.authToken).then((function(e){var t=e.drinks[0],s=a.map((function(e){return parseInt(e.id)===parseInt(r)?t:e}));n.setState(Object(m.a)({},n.state,{isModalOpen:!1,isEditMode:!1,latteDataList:s}))}))}else try{j(t,n.state.authToken).then((function(e){var t=e.drinks[0];a.push(Object(m.a)({},t)),n.setState(Object(m.a)({},n.state,{isModalOpen:!1,isEditMode:!1,latteDataList:a}))})).catch((function(e){n.setState(Object(m.a)({},n.state,{isModalOpen:!1,isEditMode:!1,userMessage:{render:!0,message:e.message,level:pe}}))}))}catch(s){n.setState(Object(m.a)({},n.state,{isModalOpen:!1,isEditMode:!1,userMessage:{render:!0,message:s.message,level:pe}}))}e.preventDefault()},n.state={isModalOpen:!1,isEditMode:!1,latteToEdit:{},latteDataList:[],authToken:null,isAuthorized:!1,userMessage:{render:!1,message:null,level:null}},n}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,a,n,r,s,i,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=g(),a=null,n=[],r={render:!1},e.prev=4,0!==this.state.latteDataList.length){e.next=11;break}return e.next=8,y(t);case 8:s=e.sent,i=Object(l.a)(s.drinks);try{for(i.s();!(o=i.n()).done;)u=o.value,n.push({id:u.id,title:u.title,ingredients:Object(d.a)(u.ingredients)})}catch(c){i.e(c)}finally{i.f()}case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),r={render:!0,message:e.t0.message,level:pe};case 16:t&&(a=N(t)),this.setState(Object(m.a)({},this.state,{latteDataList:n,authToken:t,isAuthorized:a,userMessage:r}));case 18:case"end":return e.stop()}}),e,this,[[4,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,null,r.a.createElement("div",{className:_e.a.body},r.a.createElement(z,null),r.a.createElement(I,null,r.a.createElement(E.c,null,r.a.createElement(E.a,{exact:!0,path:"/latte-machine"},r.a.createElement(U,null)),r.a.createElement(E.a,{exact:!0,path:"/latte-machine/lattes"},function(){var t=e.state.userMessage;if(t.render)return r.a.createElement(me,Object.assign({},t,{close:function(){return e.closeAlert}}))}(),function(){if(e.state.isModalOpen)return r.a.createElement(le,{display:e.state.isModalOpen,editMode:e.state.isEditMode,latte:e.state.latteToEdit,closeModal:e.closeModal,handleForm:e.handleForm,removeLatte:e.removeLatte})}(),function(){if(e.state.isAuthorized)return r.a.createElement(W,{openModal:function(){return e.openModal}})}(),r.a.createElement(ee,{latteList:this.state.latteDataList,edit:this.editLatte})),r.a.createElement(E.a,{exact:!0,path:"/latte-machine/user"},r.a.createElement(re,{token:this.state.authToken,hangleLogout:function(){return e.hangleLogout}})))),r.a.createElement(R,null)))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(he,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,a){e.exports={container:"User_container__1ilfr",userBox:"User_userBox__3yOKW",login:"User_login__23UTZ",textBox:"User_textBox__2wVjr"}}},[[47,1,2]]]);
//# sourceMappingURL=main.2f049380.chunk.js.map