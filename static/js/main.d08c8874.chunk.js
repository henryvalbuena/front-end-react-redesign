(this["webpackJsonplatte-machine"]=this["webpackJsonplatte-machine"]||[]).push([[0],{1:function(e,t,a){e.exports={modalContainer:"LatteModal_modalContainer__1-YWW",modalContent:"LatteModal_modalContent__1Rj0s",animateModal:"LatteModal_animateModal__3KMRZ",title:"LatteModal_title__uhI2b",latteName:"LatteModal_latteName__157ZE",lableBox:"LatteModal_lableBox__3pmMo",labels:"LatteModal_labels__37Wq0",inputs:"LatteModal_inputs__3lj2b",btns:"LatteModal_btns__3r5Ru",red:"LatteModal_red__33Fdy",cancel:"LatteModal_cancel__1ZMqH",icon:"LatteModal_icon__1pkq0",inputName:"LatteModal_inputName__lX1bj"}},12:function(e,t,a){e.exports={home:"Header_home__2z9XD",left:"Header_left__3cgRD",right:"Header_right__2M_fU",dash:"Header_dash__1iCGj",header:"Header_header__3mObx"}},13:function(e,t,a){e.exports={footer:"Footer_footer__2NNgL",iconA:"Footer_iconA__2-pOo",iconB:"Footer_iconB__2s1_Q",icon:"Footer_icon__11r-6"}},16:function(e,t,a){e.exports={container:"Home_container__3-qjB",text:"Home_text__a1fKi",line:"Home_line__1-nbJ",change:"Home_change__27SGc",arrow:"Home_arrow__3bP8v","arrow-jump":"Home_arrow-jump__N9lrY"}},17:function(e,t,a){e.exports={container:"CreateLatte_container__2NQzo",createDrink:"CreateLatte_createDrink__2IkQ2",text:"CreateLatte_text__24CDZ",icon:"CreateLatte_icon__1BmMh"}},27:function(e,t,a){e.exports={latteBox:"Latte_latteBox__3fsWG",latteName:"Latte_latteName__30wOU"}},41:function(e,t,a){e.exports={main:"Main_main__LmKsS"}},43:function(e,t,a){e.exports={ingredients:"LatteIngredients_ingredients__18zqb"}},44:function(e,t,a){e.exports={lattesContainer:"Lattes_lattesContainer__2xZac"}},45:function(e,t,a){e.exports={body:"App_body__ZTvxg"}},46:function(e,t,a){e.exports=a(75)},51:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(38),i=a.n(o),c=(a(51),a(3)),l=a.n(c),s=a(39),u=a(8),d=a(11),m=a(6),p=a(19),f=a(20),h=a(21),_=a(22),v=a(10),E=a(2);var b=function(e){var t=e.ingredientName,a=e.parts,n=e.color,r={title:e.latteName.value,ingredients:[{name:null,parts:null,color:null}]};return"function"===typeof t[Symbol.iterator]?r.ingredients=function(e,t,a){for(var n=[],r=0;r<e.length;r++)n.push({name:e[r].value,parts:t[r].value,color:a[r].value});return n}(t,a,n):(r.ingredients[0].name=t.value,r.ingredients[0].parts=parseInt(a.value),r.ingredients[0].color=n.value),r},N=function(){var e=window.location.href.split("access_token=")[1];if(e){var t=e.indexOf("&");return e=e.slice(0,t)}},g=function(e){var t=function(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(a)}(e);return!(parseInt(Date.now()/1e3)>t.exp)&&(!!t.permissions.includes("delete:drinks")&&(!!t.permissions.includes("patch:drinks")&&!!t.permissions.includes("post:drinks")))},k=a(40),L=a.n(k),x=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))?{apiURL:"http://localhost:3333/api",auth0:{url:"coffe-shop-project",audience:"drinks",clientId:"SuLculVALk6l2oZ7aFFQUuZZ8N6lZUrH",callbackURL:"http://localhost:3000/lattes"}}:{apiURL:"https://shielded-wildwood-23349.herokuapp.com/api",auth0:{url:"coffe-shop-project",audience:"drinks",clientId:"SuLculVALk6l2oZ7aFFQUuZZ8N6lZUrH",callbackURL:"http://henryis.me/latte-machine"}},M=x.apiURL,O=function(){var e=Object(u.a)(l.a.mark((function e(t,a,n){var r,o,i=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>3&&void 0!==i[3]?i[3]:null,e.next=3,L()({method:t,baseURL:M,url:n,data:r||null,responseType:"json",headers:{Authorization:"Bearer ".concat(a)}});case 3:return o=e.sent,e.abrupt("return",o.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O("post",a,"/drinks",t));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O("get",t,"/drinks"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(l.a.mark((function e(t,a,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O("patch",n,"/drinks/".concat(t),a));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O("delete",a,"/drinks/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),I=a(16),S=a.n(I);var B=function(e){return r.a.createElement("div",{className:S.a.container},r.a.createElement("div",{className:S.a.text},"Welcome"),r.a.createElement("div",{className:S.a.line}),r.a.createElement("span",{className:[S.a.arrow,"material-icons"].join(" ")},"expand_more"))},D=a(41),U=a.n(D);var T=function(e){return r.a.createElement("div",{className:U.a.main},e.children)},A=a(12),R=a.n(A);var H=function(e){return r.a.createElement("div",{className:R.a.header},r.a.createElement(v.b,{className:R.a.home,to:"/latte-machine"},r.a.createElement("span",{className:R.a.left},"Latte"),r.a.createElement("span",{className:R.a.dash},"-"),r.a.createElement("span",{className:R.a.right},"Machine")))},F=a(13),Z=a.n(F);var z=function(e){return r.a.createElement("div",{className:Z.a.footer},r.a.createElement(v.b,{className:Z.a.iconA,to:"/latte-machine/lattes"},r.a.createElement("i",{className:[Z.a.icon,"material-icons"].join(" ")},"local_cafe"),r.a.createElement("div",null,"Lattes")),r.a.createElement(v.b,{className:Z.a.iconB,to:"/latte-machine/user"},r.a.createElement("i",{className:[Z.a.icon,"material-icons"].join(" ")},"account_box"),r.a.createElement("div",null,"User")))},G=a(17),V=a.n(G);var W=function(e){return r.a.createElement("div",{className:V.a.container},r.a.createElement("div",{className:V.a.createDrink,onClick:e.openModal()},r.a.createElement("div",{className:V.a.text},"Create Latte"),r.a.createElement("i",{className:[V.a.icon,"material-icons"].join(" ")},"cancel")))},q=a(43),Q=a.n(q);var J=function(e){var t=e.ingredients,a=t.reduce((function(e,t){var a=t.parts;return e+parseInt(a)}),0),n=t.map((function(e,t){var n=e.color,o=e.parts,i={backgroundColor:n,height:"".concat(100*o/a,"%")};return r.a.createElement("div",{key:t,style:i})}));return r.a.createElement("div",{className:Q.a.ingredients},n)},P=a(27),K=a.n(P);var X=function(e){var t=e.ingredients,a=e.title,n=e.edit;return r.a.createElement("div",{className:K.a.latteBox,onClick:n},r.a.createElement("div",{className:K.a.latteName},a),r.a.createElement(J,{ingredients:t}))},Y=a(44),$=a.n(Y);var ee=function(e){var t=e.latteList,a=e.edit,n=t.map((function(e){return r.a.createElement(X,{key:e.id,title:e.title,ingredients:e.ingredients,edit:function(){return a(e.id)}})}));return r.a.createElement("div",{className:$.a.lattesContainer},n)},te=a(9),ae=a.n(te),ne=x.auth0;var re=function(e){var t=e.token,a=e.hangleLogout,n="https://".concat(ne.url,".auth0.com/authorize?audience=").concat(ne.audience)+"&response_type=token&client_id=".concat(ne.clientId,"&redirect_uri=").concat(ne.callbackURL);return r.a.createElement("div",{className:ae.a.container},t?r.a.createElement("div",{className:ae.a.userBox},r.a.createElement("button",{onClick:a(),className:ae.a.login},"LOG OUT"),r.a.createElement("div",{className:ae.a.textBox},r.a.createElement("span",{className:ae.a.text},t))):r.a.createElement("div",{className:ae.a.userBox},r.a.createElement("a",{href:n,className:ae.a.login},"LOG IN")))},oe=a(1),ie=a.n(oe);var ce=function(e){var t=e.ingredient,a=e.add,n=e.remove,o=e.id;return r.a.createElement("div",{className:ie.a.lableBox},r.a.createElement("label",{className:ie.a.labels},"Ingredient Name"),r.a.createElement("input",{className:ie.a.inputs,type:"text",name:"ingredientName",defaultValue:t.name}),r.a.createElement("label",{className:ie.a.labels},"Parts"),r.a.createElement("select",{name:"parts",defaultValue:t.parts},r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3")),r.a.createElement("label",{className:ie.a.labels},"Color"),r.a.createElement("input",{className:ie.a.inputs,type:"color",name:"color",defaultValue:t.color}),r.a.createElement("span",{className:ie.a.btns,onClick:function(){return n(o)}},r.a.createElement("i",{className:[ie.a.icon,ie.a.red,"material-icons"].join(" ")},"close")),r.a.createElement("span",{className:ie.a.btns,onClick:function(){return a()}},r.a.createElement("i",{className:[ie.a.icon,"material-icons"].join(" ")},"add")))},le=function(e){Object(_.a)(a,e);var t=Object(h.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).idGenerator=function(){return Math.floor(9999*Math.random())},n.add=function(){if(n.state.counter<n.maxIngredients){var e=Object(d.a)(n.state.list),t=n.idGenerator();e.push(r.a.createElement(ce,{key:t,ingredient:{},add:n.add,remove:n.remove,id:t})),n.setState({list:e,counter:n.state.counter+1})}},n.remove=function(e){if(n.state.counter>0){var t=n.state.list.findIndex((function(t){return parseInt(t.key)===parseInt(e)}));if(t>=0){var a=Object(d.a)(n.state.list);a.splice(t,1),n.setState({list:a,counter:n.state.counter-1})}}};var o=[],i=0,c=e.latte;if(c)i=(o=c.ingredients.map((function(e,t){return r.a.createElement(ce,{key:t,ingredient:e,add:n.add,remove:n.remove,id:t})}))).length-1;else{var l=n.idGenerator();o.push(r.a.createElement(ce,{key:l,ingredient:{},add:n.add,remove:n.remove,id:l}))}return n.maxIngredients=3,n.state={list:o,counter:i},n}return Object(f.a)(a,[{key:"render",value:function(){return this.state.list}}]),a}(n.Component);var se=function(e){var t=e,a=t.editMode,n=a?t.latte.title:"",o=a?t.latte.id:null,i=a?"Edit ".concat(n):"Create Latte";return r.a.createElement("div",{style:{display:e.display?"block":"none"},className:ie.a.modalContainer},r.a.createElement("div",{className:ie.a.modalContent},r.a.createElement("h2",{className:ie.a.title},i),r.a.createElement("div",{className:ie.a.preview}),r.a.createElement("form",{className:ie.a.form,onSubmit:function(t){return e.handleForm(t)}},r.a.createElement("div",{className:ie.a.latteName},r.a.createElement("label",{className:ie.a.labels},"Latte Name"),r.a.createElement("input",{className:[ie.a.inputs,ie.a.inputName].join(" "),type:"text",id:"latteName",name:"latteName",defaultValue:n})),a?r.a.createElement(le,{latte:t.latte}):r.a.createElement(le,null),r.a.createElement("button",{className:ie.a.btns,type:"submit"},"SAVE"),r.a.createElement("button",{className:[ie.a.btns,ie.a.red].join(" "),onClick:function(){return e.removeLatte(o)},type:"button"},"DELETE"),r.a.createElement("button",{className:[ie.a.btns,ie.a.cancel].join(" "),onClick:function(){return e.closeModal()},type:"button"},"CANCEL"))))},ue=a(45),de=a.n(ue),me=function(e){Object(_.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).openModal=function(){n.setState(Object(m.a)({},n.state,{isModalOpen:!0})),console.log("isOpen",!0)},n.closeModal=function(){n.setState(Object(m.a)({},n.state,{isModalOpen:!1,isEditMode:!1})),console.log("isOpen",!1)},n.editLatte=function(e){if(n.state.isAuthorized){var t=n.state.latteDataList.filter((function(t){return parseInt(t.id)===parseInt(e)}));n.setState(Object(m.a)({},n.state,{isEditMode:!0,isModalOpen:!0,latteToEdit:t[0]}))}},n.removeLatte=function(e){var t=Object(d.a)(n.state.latteDataList);n.state.isAuthorized?C(e,n.state.authToken).then((function(a){var r=t.findIndex((function(t){return parseInt(t.id)===parseInt(e)}));t.splice(r,1),n.setState(Object(m.a)({},n.state,{isEditMode:!1,isModalOpen:!1,latteDataList:t}))})).catch((function(e){console.log("REMOVE",e),n.setState(Object(m.a)({},n.state,{isEditMode:!1,isModalOpen:!1}))})):n.setState(Object(m.a)({},n.state,{isEditMode:!1,isModalOpen:!1}))},n.hangleLogout=function(){n.state.authToken&&n.setState(Object(m.a)({},n.state,{authToken:null,isAuthorized:!1}))},n.handleForm=function(e){if(!n.state.isAuthorized)return e.preventDefault(),void n.setState(Object(m.a)({},n.state,{isModalOpen:!1,isEditMode:!1}));var t=b(e.target),a=Object(d.a)(n.state.latteDataList);if(n.state.isEditMode){var r=n.state.latteToEdit.id;w(r,t,n.state.authToken).then((function(e){var t=e.drinks[0],o=a.map((function(e){return parseInt(e.id)===parseInt(r)?t:e}));n.setState(Object(m.a)({},n.state,{isModalOpen:!1,isEditMode:!1,latteDataList:o})),console.log("editted")}))}else try{j(t,n.state.authToken).then((function(e){var t=e.drinks[0];a.push(Object(m.a)({},t)),n.setState(Object(m.a)({},n.state,{isModalOpen:!1,isEditMode:!1,latteDataList:a}))})).catch((function(e){return console.log("POST ERR",e)})),console.log("submitted")}catch(o){console.log("POST ERR",o)}e.preventDefault()},n.state={isModalOpen:!1,isEditMode:!1,latteToEdit:{},latteDataList:[],authToken:null,isAuthorized:!1},n}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n,r,o,i,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=N(),a=null,n=[],e.prev=3,e.next=6,y(t);case 6:r=e.sent,o=Object(s.a)(r.drinks);try{for(o.s();!(i=o.n()).done;)c=i.value,n.push({id:c.id,title:c.title,ingredients:Object(d.a)(c.ingredients)})}catch(l){o.e(l)}finally{o.f()}e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log("Init err",e.t0);case 14:!this.state.authToken&&t&&(a=g(t)),this.setState(Object(m.a)({},this.state,{latteDataList:n,authToken:t,isAuthorized:a}));case 16:case"end":return e.stop()}}),e,this,[[3,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,null,r.a.createElement("div",{className:de.a.body},r.a.createElement(H,null),r.a.createElement(T,null,r.a.createElement(E.c,null,r.a.createElement(E.a,{exact:!0,path:"/latte-machine"},r.a.createElement(B,null)),r.a.createElement(E.a,{exact:!0,path:"/latte-machine/lattes"},function(){if(e.state.isModalOpen)return r.a.createElement(se,{display:e.state.isModalOpen,editMode:e.state.isEditMode,latte:e.state.latteToEdit,closeModal:e.closeModal,handleForm:e.handleForm,removeLatte:e.removeLatte})}(),function(){if(e.state.isAuthorized)return r.a.createElement(W,{openModal:function(){return e.openModal}})}(),r.a.createElement(ee,{latteList:this.state.latteDataList,edit:this.editLatte})),r.a.createElement(E.a,{exact:!0,path:"/latte-machine/user"},r.a.createElement(re,{token:this.state.authToken,hangleLogout:function(){return e.hangleLogout}})))),r.a.createElement(z,null)))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,a){e.exports={container:"User_container__27H0n",userBox:"User_userBox__3z7Hl",login:"User_login__1dg6o",textBox:"User_textBox__6LqBF"}}},[[46,1,2]]]);
//# sourceMappingURL=main.d08c8874.chunk.js.map